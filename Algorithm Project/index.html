<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Interactive Sorting Algorithm Visualizer and Learning Game - Learn Bubble, Selection, Insertion, Merge, and Quick Sort through hands-on gameplay">
    <title>Sorting Algorithm Visualizer | Learn Sorting Through Play</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Inter:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- ========================================================================
         SCREEN 1: Algorithm Selection
         ======================================================================== -->
    <section id="screen-selection" class="screen active">
        <div class="container">
            <header class="app-header">
                <h1 class="text-gradient">Sorting Algorithm Visualizer</h1>
                <p class="subtitle">Master sorting algorithms through interactive gameplay</p>
            </header>

            <div class="algorithm-grid" id="algorithm-grid">
                <!-- Algorithm cards will be generated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- ========================================================================
         SCREEN 2: Algorithm Explanation
         ======================================================================== -->
    <section id="screen-explanation" class="screen">
        <div class="container">
            <button class="back-btn" onclick="app.showScreen('selection')">
                ‚Üê Back to Algorithms
            </button>

            <h2 id="explanation-title" class="text-gradient">Algorithm Name</h2>

            <div class="explanation-content">
                <div class="explanation-left">
                    <div class="explanation-section">
                        <h4>üìñ How It Works</h4>
                        <div id="explanation-text" class="explanation-text"></div>
                    </div>

                    <div class="explanation-section">
                        <h4>üìã Pseudocode</h4>
                        <pre id="pseudocode" class="pseudocode"></pre>
                    </div>
                </div>

                <div class="explanation-right">
                    <div class="explanation-section">
                        <h4>üéØ Example Walkthrough</h4>
                        <div id="example-walkthrough" class="example-walkthrough"></div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: var(--space-2xl);">
                <h3 style="margin-bottom: var(--space-lg);">Select Difficulty</h3>
                <div class="difficulty-selector" id="difficulty-selector">
                    <button class="difficulty-btn active" data-difficulty="easy">Easy (5)</button>
                    <button class="difficulty-btn" data-difficulty="medium">Medium (8)</button>
                    <button class="difficulty-btn" data-difficulty="hard">Hard (12)</button>
                    <button class="difficulty-btn" data-difficulty="expert">Expert (16)</button>
                </div>

                <h3 style="margin-bottom: var(--space-lg);">Select Input Type</h3>
                <div class="input-type-selector" id="input-type-selector">
                    <button class="difficulty-btn active" data-input="random">Random</button>
                    <button class="difficulty-btn" data-input="reversed">Reverse Sorted</button>
                    <button class="difficulty-btn" data-input="nearlySorted">Nearly Sorted</button>
                    <button class="difficulty-btn" data-input="duplicates">With Duplicates</button>
                </div>

                <div id="game-options">
                    <button class="btn btn-primary btn-lg" id="start-game-btn" onclick="app.startGame()">
                        üéÆ Start Game
                    </button>

                    <button class="btn btn-secondary btn-lg" id="start-demo-btn" onclick="app.startDemo()"
                        style="margin-left: var(--space-md);">
                        üëÅÔ∏è Watch Demo
                    </button>
                </div>

                <div id="tool-options" class="hidden" style="margin-top: var(--space-lg);">
                    <button class="btn btn-primary btn-lg" onclick="app.showTool()">
                        üöÄ Open Sorting Tool
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ========================================================================
         SCREEN 3: Game Mode
         ======================================================================== -->
    <section id="screen-game" class="screen">
        <div class="container">
            <button class="back-btn" onclick="app.confirmExit()">
                ‚Üê Exit Game
            </button>

            <div class="score-display">
                <div class="score-item">
                    <span class="value" id="score-value">0</span>
                    <span class="label">Score</span>
                </div>
                <div class="score-item streak">
                    <span class="value" id="streak-value">0</span>
                    <span class="label">Streak</span>
                </div>
                <div class="score-item">
                    <span class="value" id="correct-value">0</span>
                    <span class="label">Correct</span>
                </div>
                <div class="score-item">
                    <span class="value" id="incorrect-value">0</span>
                    <span class="label">Incorrect</span>
                </div>
                <div class="score-item timer">
                    <span class="value" id="timer-value">0:00</span>
                    <span class="label">Time</span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="fill" id="progress-fill" style="width: 0%"></div>
            </div>

            <div class="step-info" id="step-info">
                <span class="step-type" id="step-type">READY</span>
                <p class="step-description" id="step-description">Select two bars to swap them</p>
                <p class="step-hint" id="step-hint">Click on bars to select them for swapping</p>
            </div>

            <div class="visualization-container">
                <div class="bars-container" id="bars-container"></div>
            </div>

            <div class="game-controls">
                <button class="btn btn-secondary" id="skip-btn" onclick="app.skipStep()">
                    ‚è≠Ô∏è Skip Step
                </button>
                <button class="btn btn-secondary" id="hint-btn" onclick="app.showHint()">
                    üí° Hint
                </button>
            </div>
        </div>
    </section>

    <!-- ========================================================================
         SCREEN 4: Demo Mode (Auto-play visualization)
         ======================================================================== -->
    <section id="screen-demo" class="screen">
        <div class="container">
            <button class="back-btn" onclick="app.stopDemo()">
                ‚Üê Back
            </button>

            <h2 id="demo-title" class="text-gradient">Algorithm Demo</h2>

            <div class="step-info" id="demo-step-info">
                <span class="step-type" id="demo-step-type">DEMO</span>
                <p class="step-description" id="demo-step-description">Watch how the algorithm works</p>
            </div>

            <div class="progress-bar">
                <div class="fill" id="demo-progress-fill" style="width: 0%"></div>
            </div>

            <div class="visualization-container">
                <div class="bars-container" id="demo-bars-container"></div>
            </div>

            <div class="game-controls">
                <div class="control-group">
                    <button class="btn btn-icon btn-secondary" id="demo-prev" onclick="app.demoStepBack()">‚èÆÔ∏è</button>
                    <button class="btn btn-icon btn-primary" id="demo-play" onclick="app.toggleDemoPlay()">‚ñ∂Ô∏è</button>
                    <button class="btn btn-icon btn-secondary" id="demo-next"
                        onclick="app.demoStepForward()">‚è≠Ô∏è</button>
                </div>
                <div class="control-group">
                    <span style="color: var(--color-text-muted);">Speed:</span>
                    <button class="difficulty-btn" data-speed="0.5" onclick="app.setDemoSpeed(0.5)">0.5x</button>
                    <button class="difficulty-btn active" data-speed="1" onclick="app.setDemoSpeed(1)">1x</button>
                    <button class="difficulty-btn" data-speed="2" onclick="app.setDemoSpeed(2)">2x</button>
                    <button class="difficulty-btn" data-speed="4" onclick="app.setDemoSpeed(4)">4x</button>
                </div>
            </div>
        </div>
    </section>

    <!-- ========================================================================
         SCREEN 5: Results
         ======================================================================== -->
    <section id="screen-results" class="screen">
        <div class="container">
            <div class="results-header">
                <h2>üéâ Game Complete!</h2>
                <div class="grade-display text-gradient" id="grade-display">A</div>
                <p class="grade-label" id="grade-label">Excellent!</p>
            </div>

            <div class="results-grid">
                <div class="result-card card">
                    <div class="icon">üéØ</div>
                    <div class="value" id="result-score">0</div>
                    <div class="label">Final Score</div>
                </div>
                <div class="result-card card">
                    <div class="icon">‚úÖ</div>
                    <div class="value" id="result-correct">0</div>
                    <div class="label">Correct Moves</div>
                </div>
                <div class="result-card card">
                    <div class="icon">‚ùå</div>
                    <div class="value" id="result-incorrect">0</div>
                    <div class="label">Incorrect Moves</div>
                </div>
                <div class="result-card card">
                    <div class="icon">üìä</div>
                    <div class="value" id="result-accuracy">0%</div>
                    <div class="label">Accuracy</div>
                </div>
                <div class="result-card card">
                    <div class="icon">‚è±Ô∏è</div>
                    <div class="value" id="result-time">0s</div>
                    <div class="label">Time Taken</div>
                </div>
                <div class="result-card card">
                    <div class="icon">üî•</div>
                    <div class="value" id="result-streak">0</div>
                    <div class="label">Max Streak</div>
                </div>
            </div>

            <div class="complexity-reminder card">
                <h4>üìö Algorithm Complexity Reminder</h4>
                <div class="complexity-grid" id="complexity-reminder-grid">
                    <!-- Filled by JavaScript -->
                </div>
            </div>

            <div style="text-align: center; margin-top: var(--space-2xl);">
                <button class="btn btn-primary btn-lg" onclick="app.playAgain()">
                    üîÑ Play Again
                </button>
                <button class="btn btn-secondary btn-lg" onclick="app.showScreen('selection')"
                    style="margin-left: var(--space-md);">
                    üè† Choose Algorithm
                </button>
            </div>
        </div>
    </section>

    <!-- ========================================================================
         SCREEN 6: Sorting Tool (Direct input -> output)
         ======================================================================== -->
    <section id="screen-tool" class="screen">
        <div class="container">
            <button class="back-btn" onclick="app.showScreen('selection')">
                ‚Üê Back to Algorithms
            </button>

            <h2 id="tool-title" class="text-gradient">Sorting Tool</h2>
            <p class="subtitle" id="tool-subtitle">Enter your numbers to see them sorted</p>

            <div class="card tool-container">
                <div class="input-group">
                    <label for="sort-input">Enter numbers (comma-separated):</label>
                    <input type="text" id="sort-input" placeholder="e.g. 5, 2, 8, 1, 9" class="form-control">
                    <p class="input-hint">Or click to generate random numbers:</p>
                    <div class="input-actions">
                        <button class="btn btn-secondary" onclick="app.generateToolRandom()">üé≤ Random</button>
                        <button class="btn btn-primary" onclick="app.runToolSort()">üöÄ Sort Now</button>
                    </div>
                </div>

                <div id="tool-results" class="tool-results hidden">
                    <div class="result-section">
                        <h4>Original Numbers:</h4>
                        <div id="tool-original" class="number-display"></div>
                    </div>

                    <div class="arrow-down">‚Üì</div>

                    <div class="result-section">
                        <h4>Sorted Numbers:</h4>
                        <div id="tool-sorted" class="number-display"></div>
                    </div>

                    <div class="tool-stats">
                        <div class="stat-item">
                            <span class="label">Time Complexity:</span>
                            <span class="value" id="tool-time-complexity">O(n log n)</span>
                        </div>
                        <div class="stat-item">
                            <span class="label">Space Complexity:</span>
                            <span class="value" id="tool-space-complexity">O(n)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal for Exit Confirmation -->
    <div id="exit-modal" class="modal-overlay">
        <div class="modal">
            <h3>Exit Game?</h3>
            <p style="color: var(--color-text-secondary);">Your progress will be lost. Are you sure?</p>
            <div style="display: flex; gap: var(--space-md); margin-top: var(--space-xl);">
                <button class="btn btn-secondary" style="flex: 1;" onclick="app.closeModal()">Cancel</button>
                <button class="btn btn-primary" style="flex: 1;" onclick="app.exitGame()">Exit</button>
            </div>
        </div>
    </div>

    <!-- Scripts - Load in correct order -->
    <script src="js/algorithms/base.js"></script>
    <script src="js/algorithms/bubbleSort.js"></script>
    <script src="js/algorithms/selectionSort.js"></script>
    <script src="js/algorithms/insertionSort.js"></script>
    <script src="js/algorithms/mergeSort.js"></script>
    <script src="js/algorithms/quickSort.js"></script>
    <script src="js/algorithms/heapSort.js"></script>
    <script src="js/algorithms/mergeSortPure.js"></script>
    <script src="js/game/scoring.js"></script>
    <script src="js/game/gameManager.js"></script>
    <script src="js/visualization/renderer.js"></script>
    <script src="js/visualization/animator.js"></script>
    <script src="js/utils/storage.js"></script>
    <script src="js/utils/helpers.js"></script>
    <script src="js/app.js"></script>
</body>

</html>